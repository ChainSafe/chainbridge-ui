{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports.parse = exports.corsValidator = exports.getEnv = exports.DEFAULT_PRIORITY = void 0;\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        (0, _defineProperty2[\"default\"])(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n/*\n * Initial settings for connect.\n * It could be changed by passing values into TrezorConnect.init(...) method\n */\n\n\nvar VERSION = '8.1.16';\nvar versionN = VERSION.split('.').map(function (s) {\n  return parseInt(s);\n}); // const DIRECTORY = `${ versionN[0] }${ (versionN[1] > 0 ? `.${versionN[1]}` : '') }/`;\n\nvar DIRECTORY = versionN[0] + \"/\";\nvar DEFAULT_DOMAIN = \"https://connect.trezor.io/\" + DIRECTORY;\nvar DEFAULT_PRIORITY = 2;\nexports.DEFAULT_PRIORITY = DEFAULT_PRIORITY;\nvar initialSettings = {\n  configSrc: './data/config.json',\n  // constant\n  version: VERSION,\n  // constant\n  debug: false,\n  priority: DEFAULT_PRIORITY,\n  trustedHost: false,\n  connectSrc: DEFAULT_DOMAIN,\n  iframeSrc: DEFAULT_DOMAIN + \"iframe.html\",\n  popup: true,\n  popupSrc: DEFAULT_DOMAIN + \"popup.html\",\n  webusbSrc: DEFAULT_DOMAIN + \"webusb.html\",\n  transportReconnect: false,\n  webusb: true,\n  pendingTransportEvent: true,\n  supportedBrowser: typeof navigator !== 'undefined' ? !/Trident|MSIE|Edge/.test(navigator.userAgent) : true,\n  manifest: null,\n  env: 'web',\n  lazyLoad: false,\n  timestamp: new Date().getTime(),\n  interactionTimeout: 600 // 5 minutes\n\n};\nvar currentSettings = initialSettings;\n\nvar parseManifest = function parseManifest(manifest) {\n  if (!manifest) return;\n  if (typeof manifest.email !== 'string') return;\n  if (typeof manifest.appUrl !== 'string') return;\n  return {\n    email: manifest.email,\n    appUrl: manifest.appUrl\n  };\n};\n\nvar getEnv = function getEnv() {\n  // $FlowIssue: chrome is not declared outside the project\n  if (typeof chrome !== 'undefined' && chrome.runtime && typeof chrome.runtime.onConnect !== 'undefined') {\n    return 'webextension';\n  }\n\n  if (typeof navigator !== 'undefined') {\n    if (typeof navigator.product === 'string' && navigator.product.toLowerCase() === 'reactnative') {\n      return 'react-native';\n    }\n\n    var userAgent = navigator.userAgent.toLowerCase();\n\n    if (userAgent.indexOf(' electron/') > -1) {\n      return 'electron';\n    }\n  } // if (typeof navigator !== 'undefined' && typeof navigator.product === 'string' && navigator.product.toLowerCase() === 'reactnative') {\n  //     return 'react-native';\n  // }\n  // if (typeof process !== 'undefined' && process.versions.hasOwnProperty('electron')) {\n  //     return 'electron';\n  // }\n\n\n  return 'web';\n}; // Cors validation copied from Trezor Bridge\n// see: https://github.com/trezor/trezord-go/blob/05991cea5900d18bcc6ece5ae5e319d138fc5551/server/api/api.go#L229\n// Its pointless to allow `trezor-connect` endpoints { connectSrc } for domains other than listed below\n// `trezord` will block communication anyway\n\n\nexports.getEnv = getEnv;\n\nvar corsValidator = function corsValidator(url) {\n  if (typeof url !== 'string') return;\n  if (url.match(/^https:\\/\\/([A-Za-z0-9\\-_]+\\.)*trezor\\.io\\//)) return url;\n  if (url.match(/^https?:\\/\\/localhost:[58][0-9]{3}\\//)) return url;\n  if (url.match(/^https:\\/\\/([A-Za-z0-9\\-_]+\\.)*sldev\\.cz\\//)) return url;\n  if (url.match(/^https?:\\/\\/([A-Za-z0-9\\-_]+\\.)*trezoriovpjcahpzkrewelclulmszwbqpzmzgub37gbcjlvluxtruqad\\.onion\\//)) return url;\n};\n\nexports.corsValidator = corsValidator;\n\nvar parse = function parse(input) {\n  if (input === void 0) {\n    input = {};\n  }\n\n  var settings = _objectSpread({}, currentSettings);\n\n  if (Object.prototype.hasOwnProperty.call(input, 'debug')) {\n    if (Array.isArray(input)) {// enable log with prefix\n    }\n\n    if (typeof input.debug === 'boolean') {\n      settings.debug = input.debug;\n    } else if (typeof input.debug === 'string') {\n      settings.debug = input.debug === 'true';\n    }\n  }\n\n  if (typeof input.connectSrc === 'string') {\n    settings.connectSrc = input.connectSrc;\n  } // For debugging purposes `connectSrc` could be defined in `global.__TREZOR_CONNECT_SRC` variable\n\n\n  if (typeof global !== 'undefined' && typeof global.__TREZOR_CONNECT_SRC === 'string') {\n    settings.connectSrc = corsValidator(global.__TREZOR_CONNECT_SRC);\n    settings.debug = true;\n  } // For debugging purposes `connectSrc` could be defined in url query of hosting page. Usage:\n  // https://3rdparty-page.com/?trezor-connect-src=https://localhost:8088/\n\n\n  if (typeof window !== 'undefined' && window.location && typeof window.location.search === 'string') {\n    var vars = window.location.search.split('&');\n    var customUrl = vars.find(function (v) {\n      return v.indexOf('trezor-connect-src') >= 0;\n    });\n\n    if (customUrl) {\n      var _customUrl$split = customUrl.split('='),\n          connectSrc = _customUrl$split[1];\n\n      settings.connectSrc = corsValidator(decodeURIComponent(connectSrc));\n      settings.debug = true;\n    }\n  }\n\n  var src = settings.connectSrc || DEFAULT_DOMAIN;\n  settings.iframeSrc = src + \"iframe.html\";\n  settings.popupSrc = src + \"popup.html\";\n  settings.webusbSrc = src + \"webusb.html\";\n\n  if (typeof input.transportReconnect === 'boolean') {\n    settings.transportReconnect = input.transportReconnect;\n  }\n\n  if (typeof input.webusb === 'boolean') {\n    settings.webusb = input.webusb;\n  }\n\n  if (typeof input.popup === 'boolean') {\n    settings.popup = input.popup;\n  }\n\n  if (typeof input.lazyLoad === 'boolean') {\n    settings.lazyLoad = input.lazyLoad;\n  }\n\n  if (typeof input.pendingTransportEvent === 'boolean') {\n    settings.pendingTransportEvent = input.pendingTransportEvent;\n  } // local files\n\n\n  if (typeof window !== 'undefined' && window.location && window.location.protocol === 'file:') {\n    settings.origin = \"file://\" + window.location.pathname;\n    settings.webusb = false;\n  }\n\n  if (typeof input.extension === 'string') {\n    settings.extension = input.extension;\n  }\n\n  if (typeof input.env === 'string') {\n    settings.env = input.env;\n  } else {\n    settings.env = getEnv();\n  }\n\n  if (typeof input.timestamp === 'number') {\n    settings.timestamp = input.timestamp;\n  }\n\n  if (typeof input.interactionTimeout === 'number') {\n    settings.interactionTimeout = input.interactionTimeout;\n  }\n\n  if (typeof input.manifest === 'object') {\n    settings.manifest = parseManifest(input.manifest);\n  }\n\n  currentSettings = settings;\n  return currentSettings;\n};\n\nexports.parse = parse;","map":{"version":3,"sources":["/home/ryann/Documents/Repos/ChainSafe/chainbridge-ui/node_modules/trezor-connect/lib/data/ConnectSettings.js"],"names":["_interopRequireDefault","require","exports","__esModule","parse","corsValidator","getEnv","DEFAULT_PRIORITY","_defineProperty2","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","getOwnPropertyDescriptors","defineProperties","defineProperty","VERSION","versionN","split","map","s","parseInt","DIRECTORY","DEFAULT_DOMAIN","initialSettings","configSrc","version","debug","priority","trustedHost","connectSrc","iframeSrc","popup","popupSrc","webusbSrc","transportReconnect","webusb","pendingTransportEvent","supportedBrowser","navigator","test","userAgent","manifest","env","lazyLoad","timestamp","Date","getTime","interactionTimeout","currentSettings","parseManifest","email","appUrl","chrome","runtime","onConnect","product","toLowerCase","indexOf","url","match","input","settings","prototype","hasOwnProperty","call","Array","isArray","global","__TREZOR_CONNECT_SRC","window","location","search","vars","customUrl","find","v","_customUrl$split","decodeURIComponent","src","protocol","origin","pathname","extension"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports.parse = exports.corsValidator = exports.getEnv = exports.DEFAULT_PRIORITY = void 0;\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2[\"default\"])(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n/*\n * Initial settings for connect.\n * It could be changed by passing values into TrezorConnect.init(...) method\n */\nvar VERSION = '8.1.16';\nvar versionN = VERSION.split('.').map(function (s) {\n  return parseInt(s);\n}); // const DIRECTORY = `${ versionN[0] }${ (versionN[1] > 0 ? `.${versionN[1]}` : '') }/`;\n\nvar DIRECTORY = versionN[0] + \"/\";\nvar DEFAULT_DOMAIN = \"https://connect.trezor.io/\" + DIRECTORY;\nvar DEFAULT_PRIORITY = 2;\nexports.DEFAULT_PRIORITY = DEFAULT_PRIORITY;\nvar initialSettings = {\n  configSrc: './data/config.json',\n  // constant\n  version: VERSION,\n  // constant\n  debug: false,\n  priority: DEFAULT_PRIORITY,\n  trustedHost: false,\n  connectSrc: DEFAULT_DOMAIN,\n  iframeSrc: DEFAULT_DOMAIN + \"iframe.html\",\n  popup: true,\n  popupSrc: DEFAULT_DOMAIN + \"popup.html\",\n  webusbSrc: DEFAULT_DOMAIN + \"webusb.html\",\n  transportReconnect: false,\n  webusb: true,\n  pendingTransportEvent: true,\n  supportedBrowser: typeof navigator !== 'undefined' ? !/Trident|MSIE|Edge/.test(navigator.userAgent) : true,\n  manifest: null,\n  env: 'web',\n  lazyLoad: false,\n  timestamp: new Date().getTime(),\n  interactionTimeout: 600 // 5 minutes\n\n};\nvar currentSettings = initialSettings;\n\nvar parseManifest = function parseManifest(manifest) {\n  if (!manifest) return;\n  if (typeof manifest.email !== 'string') return;\n  if (typeof manifest.appUrl !== 'string') return;\n  return {\n    email: manifest.email,\n    appUrl: manifest.appUrl\n  };\n};\n\nvar getEnv = function getEnv() {\n  // $FlowIssue: chrome is not declared outside the project\n  if (typeof chrome !== 'undefined' && chrome.runtime && typeof chrome.runtime.onConnect !== 'undefined') {\n    return 'webextension';\n  }\n\n  if (typeof navigator !== 'undefined') {\n    if (typeof navigator.product === 'string' && navigator.product.toLowerCase() === 'reactnative') {\n      return 'react-native';\n    }\n\n    var userAgent = navigator.userAgent.toLowerCase();\n\n    if (userAgent.indexOf(' electron/') > -1) {\n      return 'electron';\n    }\n  } // if (typeof navigator !== 'undefined' && typeof navigator.product === 'string' && navigator.product.toLowerCase() === 'reactnative') {\n  //     return 'react-native';\n  // }\n  // if (typeof process !== 'undefined' && process.versions.hasOwnProperty('electron')) {\n  //     return 'electron';\n  // }\n\n\n  return 'web';\n}; // Cors validation copied from Trezor Bridge\n// see: https://github.com/trezor/trezord-go/blob/05991cea5900d18bcc6ece5ae5e319d138fc5551/server/api/api.go#L229\n// Its pointless to allow `trezor-connect` endpoints { connectSrc } for domains other than listed below\n// `trezord` will block communication anyway\n\n\nexports.getEnv = getEnv;\n\nvar corsValidator = function corsValidator(url) {\n  if (typeof url !== 'string') return;\n  if (url.match(/^https:\\/\\/([A-Za-z0-9\\-_]+\\.)*trezor\\.io\\//)) return url;\n  if (url.match(/^https?:\\/\\/localhost:[58][0-9]{3}\\//)) return url;\n  if (url.match(/^https:\\/\\/([A-Za-z0-9\\-_]+\\.)*sldev\\.cz\\//)) return url;\n  if (url.match(/^https?:\\/\\/([A-Za-z0-9\\-_]+\\.)*trezoriovpjcahpzkrewelclulmszwbqpzmzgub37gbcjlvluxtruqad\\.onion\\//)) return url;\n};\n\nexports.corsValidator = corsValidator;\n\nvar parse = function parse(input) {\n  if (input === void 0) {\n    input = {};\n  }\n\n  var settings = _objectSpread({}, currentSettings);\n\n  if (Object.prototype.hasOwnProperty.call(input, 'debug')) {\n    if (Array.isArray(input)) {// enable log with prefix\n    }\n\n    if (typeof input.debug === 'boolean') {\n      settings.debug = input.debug;\n    } else if (typeof input.debug === 'string') {\n      settings.debug = input.debug === 'true';\n    }\n  }\n\n  if (typeof input.connectSrc === 'string') {\n    settings.connectSrc = input.connectSrc;\n  } // For debugging purposes `connectSrc` could be defined in `global.__TREZOR_CONNECT_SRC` variable\n\n\n  if (typeof global !== 'undefined' && typeof global.__TREZOR_CONNECT_SRC === 'string') {\n    settings.connectSrc = corsValidator(global.__TREZOR_CONNECT_SRC);\n    settings.debug = true;\n  } // For debugging purposes `connectSrc` could be defined in url query of hosting page. Usage:\n  // https://3rdparty-page.com/?trezor-connect-src=https://localhost:8088/\n\n\n  if (typeof window !== 'undefined' && window.location && typeof window.location.search === 'string') {\n    var vars = window.location.search.split('&');\n    var customUrl = vars.find(function (v) {\n      return v.indexOf('trezor-connect-src') >= 0;\n    });\n\n    if (customUrl) {\n      var _customUrl$split = customUrl.split('='),\n          connectSrc = _customUrl$split[1];\n\n      settings.connectSrc = corsValidator(decodeURIComponent(connectSrc));\n      settings.debug = true;\n    }\n  }\n\n  var src = settings.connectSrc || DEFAULT_DOMAIN;\n  settings.iframeSrc = src + \"iframe.html\";\n  settings.popupSrc = src + \"popup.html\";\n  settings.webusbSrc = src + \"webusb.html\";\n\n  if (typeof input.transportReconnect === 'boolean') {\n    settings.transportReconnect = input.transportReconnect;\n  }\n\n  if (typeof input.webusb === 'boolean') {\n    settings.webusb = input.webusb;\n  }\n\n  if (typeof input.popup === 'boolean') {\n    settings.popup = input.popup;\n  }\n\n  if (typeof input.lazyLoad === 'boolean') {\n    settings.lazyLoad = input.lazyLoad;\n  }\n\n  if (typeof input.pendingTransportEvent === 'boolean') {\n    settings.pendingTransportEvent = input.pendingTransportEvent;\n  } // local files\n\n\n  if (typeof window !== 'undefined' && window.location && window.location.protocol === 'file:') {\n    settings.origin = \"file://\" + window.location.pathname;\n    settings.webusb = false;\n  }\n\n  if (typeof input.extension === 'string') {\n    settings.extension = input.extension;\n  }\n\n  if (typeof input.env === 'string') {\n    settings.env = input.env;\n  } else {\n    settings.env = getEnv();\n  }\n\n  if (typeof input.timestamp === 'number') {\n    settings.timestamp = input.timestamp;\n  }\n\n  if (typeof input.interactionTimeout === 'number') {\n    settings.interactionTimeout = input.interactionTimeout;\n  }\n\n  if (typeof input.manifest === 'object') {\n    settings.manifest = parseManifest(input.manifest);\n  }\n\n  currentSettings = settings;\n  return currentSettings;\n};\n\nexports.parse = parse;"]},"metadata":{},"sourceType":"script"}